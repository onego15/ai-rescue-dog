# AIレスキュードッグ

## 概要

OpenAI APIを使った自律型AIエージェント（犬型ロボット）が、3D迷路内でランダムに移動する敵を回避しながら、救助対象を見つけて救助するターンベースのゲームです。

## 特徴

- **OpenAI API統合**: GPT-4によるエージェントの意思決定
- **ターンベース処理**: 1ターンごとに敵が移動し、AIが行動を決定
- **3D迷路環境**: Three.jsを使用した3D迷路
- **敵キャラクター**: ランダムに移動する敵を複数配置
- **勝敗システム**:
  - 勝利条件: 救助対象に到達
  - 敗北条件: 敵に接触
- **センサーシステム**: 周囲の障害物、敵の位置、ターゲット方向を検出
- **リアルタイムUI**: ステータス表示、ターン数、ミニマップ

## 技術スタック

- **Three.js**: 3Dグラフィックス
- **OpenAI API**: エージェントの意思決定（GPT-4）
- **Vite**: 開発サーバーとビルドツール
- **Vanilla JavaScript**: ゲームロジック

## インストール

```bash
npm install
```

## 実行方法

1. 開発サーバーを起動:

```bash
npm run dev
```

2. ブラウザで http://localhost:5173 を開きます。

3. OpenAI APIキーを入力（または空欄でフォールバックモード）

4. START GAMEをクリック

## ビルド

```bash
npm run build
```

## ゲームフロー

1. **環境初期化**: 迷路、エージェント、救助対象、敵（3体）を配置
2. **ターン開始**:
   - 敵がランダムに移動
   - 敵との衝突チェック（衝突→ゲームオーバー）
3. **センサーデータ収集**: 周囲の障害物、敵の位置、ターゲット方向を検出
4. **AI意思決定**: OpenAI APIにセンサーデータを送信し、次の行動を取得
5. **アクション実行**: MOVE_FORWARD, TURN_LEFT, TURN_RIGHT, STOP のいずれかを実行
6. **勝利判定**: 救助対象に到達→ゲームクリア
7. **次のターンへ**

## AIエージェントの行動

### 利用可能なアクション

- **MOVE_FORWARD**: 前方に1マス移動
- **TURN_LEFT**: 左に90度回転
- **TURN_RIGHT**: 右に90度回転
- **STOP**: 停止（ターゲット到達時のみ）

### センサー情報

- エージェントの現在位置と向き（North, East, South, West）
- 周囲の障害物（前方、左、右）
- ターゲットまでの相対方向と距離
- センサー範囲内（3マス）の敵の位置、距離、方向

## OpenAI API設定

### APIキーの取得

1. [OpenAI Platform](https://platform.openai.com/)にアクセス
2. API Keysページでキーを作成
3. ゲーム起動時に入力

### フォールバックモード

APIキーなしでも動作します。この場合、シンプルなルールベースロジックで動作：
- 前方に敵がいる場合: ランダムに回転
- 前方に壁がある場合: ランダムに回転
- それ以外: 前進

## ゲームの目標

AIエージェントが、ランダムに移動する敵を回避しながら、迷路内の救助対象（赤い人型NPC）に到達することです。エージェントは完全自律で動作し、プレイヤーの操作は不要です。

## ファイル構成

```
ai-rescue-dog/
├── index.html              # メインHTML（API入力UI含む）
├── style.css               # スタイルシート
├── src/
│   ├── main.js            # エントリポイント
│   ├── game-turnbased.js  # ターンベースゲームロジック
│   ├── agent-turnbased.js # ターンベースエージェント
│   ├── enemy.js           # 敵キャラクター
│   ├── openai-client.js   # OpenAI API クライアント
│   ├── maze.js            # 迷路生成
│   └── pathfinding.js     # A*アルゴリズム
└── algorithms/
    └── agent-behavior.md  # アルゴリズム定義（旧仕様）
```
